{% extends '../base.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" type="text/css" href="{% static "app/styles/digitalclock.css" %}">

<style>

    .container {
      float:center;
      clear: both;
      width: 100%;
    }
    
    #TeamRank {
      display: inline-block;
      vertical-align: top;
    }

    #BestPlayer{
        overflow-x:hidden;
        overflow-y:hidden;
        height:775px;
    }

    #TeamRank{
        overflow-x:hidden;
        overflow-y:hidden;
        height:775px;
    }

    #TopDiv{
        display: block;
        width: 100%;
        clear: both;
    }
    .spacingLeft{
      float:left;
      margin: .2em;
    }

    ul{
        list-style-type:none ;
    }

    .spacingRight{
      float:right;
      margin: .2em;
    }

    .text{
      float: left;
      margin-left: .5em;

    }

    .questionContain{
      width: fit-content;
      clear: both;
      display: inline-block;
    }

    #BottomDiv{
        display: block;
        width: 100%; 
        clear: both;

        /* change width to certain  */
    }

    #LeftDiv{
        float: left;
        padding: .5em;
        border-right: grey solid 0.1em;
        height: 90%;
   
    }

    #RightDiv{
        float: left;
        padding: .5em;
    }

    #team {
      color: darkslategrey; 
      max-width: 400px; 
      border-color: darkgoldenrod; 
      border-style: solid; 
      border-width: 0.1em;
    }
    #teamInfo {
      text-align: center;
      display: block;
      float:left;
      margin-right: .5em;
      
    }
    #team_name {
      display: inline-block;
    }
   
    .user {
      background-color: aliceblue; 
      width: 100%;
      text-align: center;
      }
    #btnLeave {
      background-color: gray;
      color: whitesmoke;
      align-self: center;
      margin: auto;
      margin-bottom:0.5em;
      display: block
    }
    
    .modal {
      width:auto;
      height:auto;
      overflow:auto;
      align-self: center;
      position:fixed;
      background-color: rgb(0,0,0);
      background-color: rgba(0,0,0,0.4);
    }
    .modal-content {
      background-color: #fefefe;
      padding: 1em;
      border: 1em solid #888;
      width:auto;
    }
    .close {
      color:#aaa;
      float:right;
      font-size: 18em;
      font-weight: bold;
    }
  
    .close:hover, close:focus {
      color:black;
      text-decoration: none;
      cursor: pointer;
    }
  
    .clockTimeWarning {
        color: red;
    }  

        @media (max-width: 1000px){

      #PlayerRank {
      display: inline-block;
      vertical-align: top;
      font-size: 90px;
      color:white;

      font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    }

    #PlayerResults{
      font-size: 90px;
      color:white;

      font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    }

    #TopDiv{
      text-align: center;
        display: block;
        width: 100%;
        clear: both;
        
    }

    #teamInfo{
      color:white;

      padding-top: 2em;
      font-size: 90px;
      text-shadow: -.015em 0 black, 0 .015em black, .015em 0 black, 0 -.015em black;
      font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    }

    .text{
      float: left;
      margin-left: .5em;

    }

    #questions{
      overflow-x:hidden;
      overflow-y:hidden;
      height:fit-content;
      text-align: center;
    }

    .questionContain{
      width: fit-content;
      clear: both;
      display: inline-block;
    }

    #BottomDiv{
        display: block;
        width: 100%;
        clear: both;
    }

    #LeftDiv{
        border-color: transparent;
        float: left;
        text-align: center;
        width: auto;
        padding: .5em;
        height: fit-content;
        
   
    }

    #paragraph{
            font-size: 60px;
        }

    body{
      background-image: url("{% static "app/images/lobbyimage.jpg" %}");
        background-size: 100% 120%;
        background-repeat: no-repeat;
        background-attachment: fixed;
        }

    #RightDiv{
        float: left;
        padding: .5em;
        width: 100%;
        text-align: center;
        height: fit-content;


    }

    #Accuracy{
        float: left;
        width: 100%;
        text-align: center;
        font-size: 70px;
    }

    #RoundResult{
        float: left;
        text-align: center;
        width: 100%;
        font-size: 90px;
        font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        color:white;

        
    }
    #TeamResults{
      float: left;
      padding: .5em;
        text-align: center;
        width: 100%;
        font-size: 90px;
        font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        color:white;


    }
    #BestPlayer{
      font-size: 70px;
        font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        color:white;

    }


    #Font{
      font-size: 50px;
      font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      width: fit-content;
      color:white;


    }
    #TotalPositions{
      font-size: 60px;

    }



  }

    
</style>
  
<!-- <script type="text/javascript" src="{% static "app/scripts/digitalclock.js" %}"></script> -->

<script>
  var username = '{{username|safe}}'
  var game = {{game|safe}};
  var results = {{results|safe}};
  var teams = results['teams'];
  var users = results['users'];
  var totalPositions = results['game']['team_count'];
  var teamRank = results['teamRank'];
  var index = undefined;


  

document.onreadystatechange = function(){
  if (document.readyState == "complete"){
    init();
  }
}
function init() {
    // setTimeout(checkCurrentQuestionIndex,500);
    updateTeamDisplay(teamRank);
    updateUserDisplay(users);
  }

  function timeup() {
    alert('Time expired');
  }

  function initClock(time) {
    var divHours = document.getElementsByClassName("hours")[0];
    var divMinutes = document.getElementsByClassName("minutes")[0];
    var divSeconds = document.getElementsByClassName("seconds")[0];
    initLocalClock(time,divHours,divMinutes,divSeconds);
  }




  function updateUserDisplay(users){
    var u = document.getElementById("BestPlayer");
    
    for (var i = 0; i < users.length; i++ ){
      var user = results['users'][i];
      var _PlayerName = document.createElement("div");
      var _PlayerRank = document.createElement("div");
      var _points = document.createElement("div");
      var _host = document.createElement("li");

      _PlayerName.textContent = user[1]['username'] + " rank: ";
      _PlayerRank.textContent = user[1]['rank'] + " points: ";
      _points.textContent = user[1]['points'];
     
      _PlayerName.classList.add("spacingLeft");
      _PlayerName.id = "Font";
      _PlayerRank.classList.add("spacingLeft");
      _PlayerRank.id = "Font";

      _points.classList.add("spacingRight");
      _points.id = "Font";

      _host.appendChild(_PlayerName);
      _host.appendChild(_PlayerRank);
      _host.appendChild( _points);

      u.appendChild(_host);
    }
  }
  

  function updateTeamDisplay(teamRank){
    var t = document.getElementById("TeamRank");
    
    for (var i = 0; i < teamRank.length; i++ ){
      var team = teams[teamRank[i][1]];
      var _teamName = document.createElement("div");
      var _teamRank = document.createElement("div");
      var _points = document.createElement("div");
      var _host = document.createElement("li");

      _teamName.textContent = team['teamName'] + " rank: ";
      _teamName.id = "Font";
      _teamRank.textContent = team['rank'] + " points: ";
      _teamRank.id = "Font";
      _points.textContent = team['points'];
      _points.id = "Font";

      _teamName.classList.add("spacingLeft");
      _teamRank.classList.add("spacingLeft");
      _points.classList.add("spacingRight");

      _host.appendChild(_teamName);
      _host.appendChild(_teamRank);
      _host.appendChild( _points);

      t.appendChild(_host);
    }
  }




</script>
<body>
    {% include "../Components/top_menu.html" %}
    <div class="container">
        <div id = "TopDiv">
            {% csrf_token %}
            <!-- <article id="clock" class="clock">
                <div class="minutes"></div>
                <div class="timesep">:</div>
                <div class="seconds"></div>
            </article> -->
            <div id=teamDiv>
                <div>
                </div>
            </div>
        </div>
        <div id = "BottomDiv">
            <div id = "LeftDiv">
                <div id = "RoundResult"> <u>Match Ranking</u>
                  <div id = "Rank">
                  <ul id = "TeamRank"></ul> 
                  </div>
                </div> 
            </div>
            <div id = "RightDiv">
                <div id = PlayerResults> <u>Player Rankings</u></div>
                <div id = "MostAccurate">
                <ul id = "BestPlayer" ></ul>
 

            
            </div>
        </div>
    </div>
</body>

{% endblock %}